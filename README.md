# Introduction 
Demo server implementation of verifying the OAuthInfo object from the C4C Mashup API. 

This is a minimal re-implementation of the AuthInfo processor from the example repo https://github.com/zhuming/c4c_mashup_oauth_sample

# Getting Started
```
npm install
npm run start
```

# Docs
index.js contains the full server demo
public/stat.html contains the static HTML code pasted to the C4C mashup through the C4C admin UI.

## Server

C4C send the InfoObject from the mashup API to the server through a C4C server side webservice. The webservice does a POST with the InfoObject in a form-encoded string in the variable "payload". The infoobject is stringified JSON. 

Auth options for the receiver: Basic (OAuth 1.0 available according to documentation but unclear how it is supposed to work). 


## Example request
Requests from C4C look like this (example without Basic auth):
```
POST /verify HTTP/1.1
Host: 9fad682e42da.ngrok.io
User-Agent: SAP NetWeaver Application Server (1.0;804)
Content-Length: 2195
Accept-Encoding: gzip
Content-Type: application/x-www-form-urlencoded; charset=utf-8
X-Bluecoat-Via: ded1ff6df40ba754
X-Forwarded-For: 157.133.70.24
X-Forwarded-Proto: http

payload=%7B%22OAuthInfo%22%3A%22eyJob3N0IjoiaHR0cHM6Ly9teTM0OTg4MC5jcm0ub25kZW1hbmQuY29tIiwidXNlciI6IlNFRUdFUiIsImJhc2U2NF9jZXJ0IjoiTUlJRHBqQ0NBbzZnQXdJQkFnSU5NTGZFenpDcnZVRUFBQWFIaVRBTkJna3Foa2lHOXcwQkFRc0ZBREJJTVFzd0NRWURWUVFHRXdKRVJURWNNQm9HQTFVRUNnd1RVMEZRSUZSeWRYTjBJRU52YlcxMWJtbDBlVEViTUJrR0ExVUVBd3dTVTBGUUlGQmhjM053YjNKMElFTkJJRWN5TUI0WERUSXdNVEl6TVRJeU5UQTBNRm9YRFRJeE1USXpNVEl5TlRBME1Gb3dlakVMTUFrR0ExVUVCaE1DUkVVeEhEQWFCZ05WQkFvVEUxTkJVQ0JVY25WemRDQkRiMjF0ZFc1cGRIa3hMekF0QmdOVkJBc1RKa2t3TURBd01EQXdNREEzTkRFeU1EY3pPVFlnTFNCQ2RYTnBibVZ6YzBKNVJHVnphV2R1TVJ3d0dnWURWUVFERXhOTk1EQXdNREF3TURBd056UXhNakEzTXprMk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBckMrdGtvQTZLYTZXWHI2UnhFRVNUTHN5UHdPcm1rMEpHazJ0cDFDc0lRMlZDZEh1anphS0pveGJsZ2dBQU1RWjEvL1VpZ1gwemZSSTdoVXlDRERnaGNvanRnVXk1eW8xdjBMenF0dmI4ZmR1dXZmaHhsTlNFbjA4ak9ibS84Zjc5VjYzb1RSMzZHSTBGbTU4Z2xjNk4wSmFqc1hzYWdENy9ma3gxNFc1REo0ZzRncno4QTFJZ0hXemhzQytwdnZlS1ZTM2tvTXZNeHh2SU9NMk1WazNVU3kzNTRZUCt6bEdPV0lMeTdOeURjRExYN0lRdDJPdG1lbDhvS0Z5L1VtZ1VtenhvZnpIUWYxSTVwbmNVSU5WOHZ1M2hzZ0tJMXdobUxkQnJwN2o0elRCTUQxM0VUa1RKN2xyaWFZOXI2emxlek4yemFYOG4zUms2bVkyNFV1MjF3SURBUUFCbzEwd1d6QUpCZ05WSFJNRUFqQUFNQTRHQTFVZER3RUIvd1FFQXdJRThEQWRCZ05WSFE0RUZnUVVZWkRydEdvMmJsRjNDbHdmZ3kwWU0rR2l1Vll3SHdZRFZSMGpCQmd3Rm9BVXFlNXA1YUZmOTlDZGdkb3dCVTRpS3dDbm41NHdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBS1JDdVVRazAvazZEMlBjdGxzL21iOUFURldSNncwL2lpekhkcVRXejFFV1U1c3dDT1BjR1JMcE93alR0Q0xnL3N6WUhnYmVJeHVtWXFNQjd3cFBZMGFQMWJoWk5BVHk5MFd0bW5WSDUxTVdhMitmNk5yeDkzeW55UVVNUU5uNzJBY0R1RlB3cXp1NllOMHpmOHQwVEJtc2o1VmZhTEdjVzl6aDd5bE5WMlBwMVNFdlZMSnY1QjBsQXNRUVNENnJOOHppSkdHZEE2TW1UM1NHY1pTeEl3NVJFdlFYZ3BzcmJUSkZwQllHOUFUUVhncFU0MHBkWWMvRExmdzVCWGM3WE5xbmdaSDF0T0FtUkRuYXpMcVhSY3BCb1pwR3hHSjd3U21JS2tkbWpLTVp2R0cwYURLUm4xdXE4S1N2NTRFQW5qVjluTmZucWVTakZuQ3FuSldZaDJBPSJ9%22%2C%22signature%22%3A%22ZOWHPwHMmeD49cBykkeMoCUFHbpkk6Knj8Mm5rZbtWR0TWU3x5c0JpvcoPsOuA2ggPaZCI4qzUjzUaGr0Bao3COCfaZN4OLQ9yjX9j47Ss2qTEUANzUgfkhjks1W8qFAWRuvSatyLATxOW9dv%2BcBHmz29mJZMgVmVEGOYx10gKG74AbPUr4RJLPoOh4XtNRL24jhwe9lQCqG5oQ4IsnTYzrTMBHxUtf2KMRuTL%2BtnjKBViV1q2SWM8Jm8BDhmrGdqj6I800G2mwHOHIuTvEUmvOOs15%2BBuFRw3T5wzu3QgSGO4e5tu89qSvdva7V1GrA8h%2BV1jQBvu%2FdKcwMpi3g3Q%3D%3D%22%7D
```
